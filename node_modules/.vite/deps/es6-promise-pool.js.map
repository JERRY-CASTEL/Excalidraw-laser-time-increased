{
  "version": 3,
  "sources": ["../../../../node_modules/es6-promise-pool/es6-promise-pool.js"],
  "sourcesContent": ["(function (root, factory) {\n  /* istanbul ignore next */\n  if (typeof define === 'function' && define.amd) {\n    define([], factory)\n  } else if (typeof exports === 'object') {\n    module.exports = factory()\n  } else {\n    root.PromisePool = factory()\n    // Legacy API\n    root.promisePool = root.PromisePool\n  }\n})(this, function () {\n  'use strict'\n\n  var EventTarget = function () {\n    this._listeners = {}\n  }\n\n  EventTarget.prototype.addEventListener = function (type, listener) {\n    this._listeners[type] = this._listeners[type] || []\n    if (this._listeners[type].indexOf(listener) < 0) {\n      this._listeners[type].push(listener)\n    }\n  }\n\n  EventTarget.prototype.removeEventListener = function (type, listener) {\n    if (this._listeners[type]) {\n      var p = this._listeners[type].indexOf(listener)\n      if (p >= 0) {\n        this._listeners[type].splice(p, 1)\n      }\n    }\n  }\n\n  EventTarget.prototype.dispatchEvent = function (evt) {\n    if (this._listeners[evt.type] && this._listeners[evt.type].length) {\n      var listeners = this._listeners[evt.type].slice()\n      for (var i = 0, l = listeners.length; i < l; ++i) {\n        listeners[i].call(this, evt)\n      }\n    }\n  }\n\n  var isGenerator = function (func) {\n    return (typeof func.constructor === 'function' &&\n      func.constructor.name === 'GeneratorFunction')\n  }\n\n  var functionToIterator = function (func) {\n    return {\n      next: function () {\n        var promise = func()\n        return promise ? {value: promise} : {done: true}\n      }\n    }\n  }\n\n  var promiseToIterator = function (promise) {\n    var called = false\n    return {\n      next: function () {\n        if (called) {\n          return {done: true}\n        }\n        called = true\n        return {value: promise}\n      }\n    }\n  }\n\n  var toIterator = function (obj, Promise) {\n    var type = typeof obj\n    if (type === 'object') {\n      if (typeof obj.next === 'function') {\n        return obj\n      }\n      /* istanbul ignore else */\n      if (typeof obj.then === 'function') {\n        return promiseToIterator(obj)\n      }\n    }\n    if (type === 'function') {\n      return isGenerator(obj) ? obj() : functionToIterator(obj)\n    }\n    return promiseToIterator(Promise.resolve(obj))\n  }\n\n  var PromisePoolEvent = function (target, type, data) {\n    this.target = target\n    this.type = type\n    this.data = data\n  }\n\n  var PromisePool = function (source, concurrency, options) {\n    EventTarget.call(this)\n    if (typeof concurrency !== 'number' ||\n        Math.floor(concurrency) !== concurrency ||\n        concurrency < 1) {\n      throw new Error('Invalid concurrency')\n    }\n    this._concurrency = concurrency\n    this._options = options || {}\n    this._options.promise = this._options.promise || Promise\n    this._iterator = toIterator(source, this._options.promise)\n    this._done = false\n    this._size = 0\n    this._promise = null\n    this._callbacks = null\n  }\n  PromisePool.prototype = new EventTarget()\n  PromisePool.prototype.constructor = PromisePool\n\n  PromisePool.prototype.concurrency = function (value) {\n    if (typeof value !== 'undefined') {\n      this._concurrency = value\n      if (this.active()) {\n        this._proceed()\n      }\n    }\n    return this._concurrency\n  }\n\n  PromisePool.prototype.size = function () {\n    return this._size\n  }\n\n  PromisePool.prototype.active = function () {\n    return !!this._promise\n  }\n\n  PromisePool.prototype.promise = function () {\n    return this._promise\n  }\n\n  PromisePool.prototype.start = function () {\n    var that = this\n    var Promise = this._options.promise\n    this._promise = new Promise(function (resolve, reject) {\n      that._callbacks = {\n        reject: reject,\n        resolve: resolve\n      }\n      that._proceed()\n    })\n    return this._promise\n  }\n\n  PromisePool.prototype._fireEvent = function (type, data) {\n    this.dispatchEvent(new PromisePoolEvent(this, type, data))\n  }\n\n  PromisePool.prototype._settle = function (error) {\n    if (error) {\n      this._callbacks.reject(error)\n    } else {\n      this._callbacks.resolve()\n    }\n    this._promise = null\n    this._callbacks = null\n  }\n\n  PromisePool.prototype._onPooledPromiseFulfilled = function (promise, result) {\n    this._size--\n    if (this.active()) {\n      this._fireEvent('fulfilled', {\n        promise: promise,\n        result: result\n      })\n      this._proceed()\n    }\n  }\n\n  PromisePool.prototype._onPooledPromiseRejected = function (promise, error) {\n    this._size--\n    if (this.active()) {\n      this._fireEvent('rejected', {\n        promise: promise,\n        error: error\n      })\n      this._settle(error || new Error('Unknown error'))\n    }\n  }\n\n  PromisePool.prototype._trackPromise = function (promise) {\n    var that = this\n    promise\n      .then(function (result) {\n        that._onPooledPromiseFulfilled(promise, result)\n      }, function (error) {\n        that._onPooledPromiseRejected(promise, error)\n      })['catch'](function (err) {\n        that._settle(new Error('Promise processing failed: ' + err))\n      })\n  }\n\n  PromisePool.prototype._proceed = function () {\n    if (!this._done) {\n      var result = { done: false }\n      while (this._size < this._concurrency &&\n          !(result = this._iterator.next()).done) {\n        this._size++\n        this._trackPromise(result.value)\n      }\n      this._done = (result === null || !!result.done)\n    }\n    if (this._done && this._size === 0) {\n      this._settle()\n    }\n  }\n\n  PromisePool.PromisePoolEvent = PromisePoolEvent\n  // Legacy API\n  PromisePool.PromisePool = PromisePool\n\n  return PromisePool\n})\n"],
  "mappings": "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",
  "names": ["Promise"]
}
